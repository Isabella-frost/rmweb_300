sap.ui.define(["./BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,r,n,s){"use strict";return e.extend("rm.webshop.shop.controller.xdocsupport",{onInit:function(){var e=sap.ui.require.toUrl("rm/webshop/shop")+"/img/Logo.jpg";var t=new o({rmLogo:e,selectedTabKey:"HeadXSupport",UserInfo:{doctor:"",ydernr:"",cvrnr:"",brugernr:""}});this.getView().setModel(t,"view");this._fetchUserData();this.getOwnerComponent().getRouter().getRoute("Routexdocsupport").attachPatternMatched(this._onRouteMatched,this)},_getCurrentUserNo:function(){const e=this.getOwnerComponent().getModel("globalUser");return e?e.getProperty("/UserNo"):null},_fetchUserData:function(){var e=this.getOwnerComponent().getModel();var o=this.getView().getModel("view");const r=this._getCurrentUserNo();const n=`/UserSet('${r}')`;if(!e){t.show("Error: OData model not available.");return}e.read(n,{urlParameters:{$format:"json"},success:function(e){o.setProperty("/UserInfo",{doctor:e.AdrName||"N/A",ydernr:e.Ydernr||"N/A",cvrnr:e.Cvr||"N/A",brugernr:e.UserNo||"N/A"})}.bind(this),error:function(e){t.show("Failed to load user data.");console.error("OData Read failed:",e);o.setProperty("/UserInfo",{doctor:"Fejl: Kunne ikke hente data",ydernr:"",cvrnr:"",brugernr:""})}.bind(this)})},_onRouteMatched:function(e){var t=this.byId("idTopLevelTab");var o=this.getView().getModel("view");if(t){t.setSelectedKey("HeadXSupport");o.setProperty("/selectedTabKey","HeadXSupport")}},handleIconTabBarSelect:function(e){var t=e.getParameter("selectedKey");var o=this.getView().getModel("view");o.setProperty("/selectedTabKey",t);if(t==="HeadXSoegning"){this.getOwnerComponent().getRouter().navTo("Routexdocvaresog")}if(t==="HeadInfo"){this.getOwnerComponent().getRouter().navTo("Routeinfo")}if(t==="HeadXOversigt"){this.getOwnerComponent().getRouter().navTo("Routexdocbestilling")}if(t==="HeadXProfil"){this.getOwnerComponent().getRouter().navTo("Routexdocprofil")}if(t==="HeadXSupport"){this.getOwnerComponent().getRouter().navTo("Routexdocsupport")}},onBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Routemain")}})});
//# sourceMappingURL=xdocsupport.controller.js.map
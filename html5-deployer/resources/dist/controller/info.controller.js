sap.ui.define(["./BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,o,n,a){"use strict";return e.extend("rm.webshop.test.controller.info",{onInit:function(){var e=sap.ui.require.toUrl("rm/webshop/test")+"/img/Logo.jpg";var t=new r({rmLogo:e,selectedTabKey:"HeadInfo",UserInfo:{doctor:"",ydernr:"",cvrnr:"",brugernr:""},deliveryInfoHTML:""});this.getView().setModel(t,"view");this.getOwnerComponent().getRouter().getRoute("Routeinfo").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(){var e=this.byId("idTopLevelTab");var t=this.getView().getModel("view");t.setProperty("/selectedTabKey","HeadInfo");if(e){e.setSelectedKey("HeadInfo")}this._fetchUserData()},_fetchUserData:function(){var e=this.getOwnerComponent().getModel();var r=this.getView().getModel("view");var o=this.getOwnerComponent().getModel("globalUser");var n=o?o.getProperty("/UserNo"):null;if(!n){t.show("Bruger-ID ikke fundet. Log venligst ind igen.");return}var a=`/UserSet('${n}')`;e.read(a,{urlParameters:{$format:"json"},success:function(e){r.setProperty("/UserInfo",{doctor:e.AdrName||"N/A",ydernr:e.Ydernr||"N/A",cvrnr:e.Cvr||"N/A",brugernr:e.UserNo||"N/A"});r.setProperty("/deliveryInfoHTML",e.UserInfo||"")},error:function(e){console.error("OData Read failed:",e);t.show("Kunne ikke hente brugerdata.");r.setProperty("/UserInfo",{doctor:"Fejl ved indl√¶sning",ydernr:"",cvrnr:"",brugernr:""})}})},handleIconTabBarSelect:function(e){var t=e.getParameter("selectedKey");var r=this.getView().getModel("view");r.setProperty("/selectedTabKey",t);var o=this.getOwnerComponent().getRouter();switch(t){case"HeadXSoegning":o.navTo("Routexdocvaresog");break;case"HeadInfo":o.navTo("Routeinfo");break;case"HeadXOversigt":o.navTo("Routexdocbestilling");break;case"HeadXProfil":o.navTo("Routexdocprofil");break;case"HeadXSupport":o.navTo("Routexdocsupport");break;default:break}},onBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Routemain")},onOpenBasket:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Routexdocvaresog")}})});
//# sourceMappingURL=info.controller.js.map
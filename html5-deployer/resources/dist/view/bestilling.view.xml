<mvc:View controllerName="rm.webshop.shop.controller.bestilling"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">

    <u:ObjectPageHeaderContent id="BestillingViewObjHeader">
        <u:content>

            <Image id="BestillingViewImageLogo"
                src="{
                    path: 'view>/rmLogo'
                }"
                width="18%" height="10%"/>
            
            <Image id="BestillingViewImageToAddSpace"
                src="{
                    path: 'view>/123'
                }"
                width="40%" height="5%"/>
            
            <layout:VerticalLayout id="ProfilViewUserInfoHeader">
                <Text text="Navn: {view>/UserInfo/navn}" class="smallText" id="doctor"/>
                <Text text="Adresse: {view>/UserInfo/adresse}, {view>/UserInfo/zip} {view>/UserInfo/by}" class="smallText" id="ydernr"/>
                <Text text="Telefon: {view>/UserInfo/tlfnr}" class="smallText" id="cvrnr"/>
                <Text text="Bruger nr: {view>/UserInfo/brugernr}" class="smallText" id="bruger"/>
                <Text text="Afdeling: {view>/UserInfo/afdeling}" class="smallText" id="afd"/>
            </layout:VerticalLayout>
            <Button text="Log af" press="onBack"></Button>
        </u:content>
    </u:ObjectPageHeaderContent>

    <Page id="page">
            <content>
            <IconTabBar id="idTopLevelTab" select=".handleIconTabBarSelect">
                <items>
                    <IconTabFilter text="Varesøgning" id="HeadSoegning" key="HeadSoegning"/>
                    <IconTabFilter text="Bestillingsoversigt" id="HeadOversigt" key="HeadOversigt"/>
                    <IconTabFilter text="Profil" id="HeadProfil" key="HeadProfil"/>
                    <IconTabFilter text="Hjælp" id="HeadSupport" key="HeadSupport"/>
                </items>
            </IconTabBar>
            <layout:Splitter id="BestillingViewLayout" orientation="Horizontal" height="70%">
                <layout:contentAreas>
                    <Page id="BestillingdetailPage" title="Ordrehistorik"
                          layoutData="{layout:SplitterLayoutData, resizable: true, size: '50%'}">
                        <content>
                            <VBox class="sapUiTinyMargin">
                                <CheckBox 
                                        text="Vis også lukkede ordrer"
                                        id="showClosedOrdersCheckbox"
                                        selected="false"
                                        select=".onShowClosedOrdersToggle" />
                                <List id="orderList" items="{path: 'ordersModel>/orders'}" mode="SingleSelectMaster" selectionChange="onOrderSelect">
                                    <CustomListItem>
                                        <VBox class="sapUiSmallMarginBegin sapUiSmallMarginTop">
                                            <HBox justifyContent="SpaceBetween">
                                                <Text text="Ordrenr: {ordersModel>OrderNo}" /> 
                                                <Text text="Status: {ordersModel>HeaderStatusText}" tooltip="Beskrivelse her"/>
                                            </HBox>
                                            <Text text="Ordre afgivet d. {ordersModel>OrderDateEdit} kl. {ordersModel>OrderTimeEdit}" />
                                        </VBox>
                                    </CustomListItem>
                                </List>
                            </VBox>
                        </content>
                    </Page>

                    <Page 
                        id="BestillingDetailPage"
                        title="Ordre Detaljer">
                        <Button text="Tilføj kopi af ordre til kurv" press="onCopyOrder"></Button>
                        <List
                            id="orderItemsList"
                            noDataText="Ingen varer fundet for denne ordre">
                            
                                <CustomListItem>
                                <HBox fitContainer="true" alignItems="Center" justifyContent="SpaceBetween" class="sapUiTinyMargin">

                                    <!-- LEFT: fixed column -->
                                    <VBox class="sapUiTinyMarginEnd fixedImageCol">
                                    <Image
                                        src="{ path: 'ordersModel>PictureUrl', formatter: '.formatter.pictureUrl' }"
                                        width="60px" height="60px"
                                        class="sapUiSmallMarginBottom"/>
                                    </VBox>

                                    <!-- MIDDLE: flexible column -->
                                    <VBox class="sapUiSmallMarginEnd middleCol">
                                    <Text text="{ordersModel>Maktx}" maxLines="2" wrapping="true" class="sapMObjectListItemTitle"/>
                                    <Text text="Varenr: {ordersModel>Matnr}" class="sapMObjectListItemIntro"/>
                                    <Text text="Leverandør varenr: {ordersModel>Levmat}" class="sapMObjectListItemIntro"/>
                                    <Text text="Generel status: {ordersModel>ItemStatusText}" class="sapMObjectListItemIntro"/>
                                    <Text text="Forventet levering: {ordersModel>ExpectDelivDateEdit}" class="sapMObjectListItemIntro"/>

                                    <VBox items="{ordersModel>TrackTraces}">
                                        <HBox class="sapUiSmallMarginBegin sapUiTinyMarginTop" alignItems="Center">
                                        <items>
                                                <Text text=" • {ordersModel>CreateDateEdit} {ordersModel>TtStatusText} {ordersModel>OrderQuantity} {ordersModel>OrderUnit}" />
                                                <Text text=" | " class="sapUiTinyMarginBeginEnd" />
                                                <Link text="Track &amp; Trace"
                                                    href="{ordersModel>UrlTrackTrace}"
                                                    target="_blank"
                                                    class="sapMObjectListItemIntro"/>
                                        </items>
                                        </HBox>
                                    </VBox>
                                    </VBox>

                                    <!-- RIGHT: fixed column -->
                                    <VBox class="fixedRightCol">
                                    <Text text="{ordersModel>OrderUnitEdit}" class="sapMObjectListItemIntro"/>
                                    <ObjectStatus title="Antal" text="{ordersModel>OrderQuantity}" state="Success"/>
                                    <Button text="Tilføj vare til kurv" press="onCopyOrderItem"/>
                                    </VBox>

                                </HBox>
                                </CustomListItem>

                        </List>
                    </Page>
                </layout:contentAreas>
            </layout:Splitter>
            </content>
    </Page>
</mvc:View>
<mvc:View controllerName="rm.webshop.shop.controller.xdocbestilling"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m">

    <u:ObjectPageHeaderContent id="InfoViewObjHeader">
        <u:content>
            <Image id="InfoViewImageLogo"
                src="{
                    path: 'view>/rmLogo',
                    formatter : '.formatter.pictureUrl'
                }"
                width="18%" height="10%"/>
            
            <Image id="InfoViewImageToAddSpace"
                src="{
                    path: 'view>/123'
                }"
                width="50%" height="5%"/>

            <layout:VerticalLayout id="InfoViewUserInfoHeader">
                <Text text="Læge: {view>/UserInfo/doctor}" class="smallText" id="doctor"/>
                <Text text="Yder nr: {view>/UserInfo/ydernr}" class="smallText" id="ydernr"/>
                <Text text="CVR nr: {view>/UserInfo/cvrnr}" class="smallText" id="cvrnr"/>
                <Text text="Bruger nr: {view>/UserInfo/brugernr}" class="smallText" id="bruger"/>
                <Button text="Log af" press=".onBack"></Button>
            </layout:VerticalLayout>
        </u:content>
    </u:ObjectPageHeaderContent>

    <Page id="Infopage">
        <content>
            <IconTabBar id="idTopLevelTab" select=".handleIconTabBarSelect">
                <items>
                    <IconTabFilter text="Info" id="HeadInfo" key="HeadInfo"/>
                    <IconTabFilter text="Varesøgning" id="HeadSoegning" key="HeadXSoegning"/>
                    <IconTabFilter text="Bestillingsoversigt" id="HeadOversigt" key="HeadXOversigt"/>
                    <IconTabFilter text="Profil" id="HeadProfil" key="HeadXProfil"/>
                    <IconTabFilter text="Hjælp" id="HeadSupport" key="HeadXSupport"/>
                </items>
            </IconTabBar>
        <layout:Splitter id="BestillingViewLayout" orientation="Horizontal" height="70%">
            <layout:contentAreas>
                <Page id="BestillingdetailPage" title="Ordrehistorik" 
                      enableScrolling="false"
                      layoutData="{layout:SplitterLayoutData, resizable: true, size: '50%'}">
                    <content>
                        <VBox class="sapUiTinyMargin" height="100%">
                            <CheckBox 
                                text="Vis også lukkede ordrer"
                                id="showClosedOrdersCheckbox"
                                selected="false"
                                select=".onShowClosedOrdersToggle" />
                                <List
                                    id="orderList"
                                    items="{path: 'ordersModel>/orders'}"
                                    mode="SingleSelectMaster"
                                    selectionChange="onOrderSelect"
                                    growing="true"
                                    growingScrollToLoad="true"
                                    growingThreshold="50">
                                    <CustomListItem>
                                        <VBox class="sapUiSmallMarginBegin sapUiSmallMarginTop">
                                            <HBox justifyContent="SpaceBetween">
                                                <Text text="Ordrenr: {ordersModel>OrderNo}" /> 
                                                <Text text="Status: {ordersModel>HeaderStatusText}"/>
                                            </HBox>
                                            <Text text="Ordre afgivet d. {ordersModel>OrderDateEdit} kl. {ordersModel>OrderTimeEdit}" />
                                        </VBox>
                                    </CustomListItem>
                                </List>
                        </VBox>
                    </content>
                </Page>

                    <Page 
                        id="BestillingDetailPage"
                        title="Ordre Detaljer">
                        <Button text="Tilføj kopi af ordre til kurv" press="onCopyOrder"></Button>
                        <List
                            id="orderItemsList"
                            noDataText="Ingen varer fundet for denne ordre">
                            
                            <CustomListItem>
                                <HBox fitContainer="true" alignItems="Center" justifyContent="SpaceBetween" class="sapUiTinyMargin">

                                    <!-- LEFT: fixed column -->
                                    <VBox class="sapUiTinyMarginEnd fixedImageCol">
                                    <Image
                                        src="{ path: 'ordersModel>PictureUrl', formatter: '.formatter.pictureUrl' }"
                                        width="60px" height="60px"
                                        class="sapUiSmallMarginBottom"/>
                                    </VBox>

                                    <!-- MIDDLE: flexible column -->
                                    <VBox class="sapUiSmallMarginEnd middleCol">
                                    <Text text="{ordersModel>Maktx}" maxLines="2" wrapping="true" class="sapMObjectListItemTitle"/>
                                    <Text text="Varenr: {ordersModel>Matnr}" class="sapMObjectListItemIntro"/>
                                    <Text text="Leverandør varenr: {ordersModel>Levmat}" class="sapMObjectListItemIntro"/>

                                    <Text text="Generel status: {ordersModel>ItemStatusText}" class="sapMObjectListItemIntro"/>
                                    <Text text="Forventet levering: {ordersModel>ExpectDelivDateEdit}" class="sapMObjectListItemIntro"/>

                                                                        <VBox items="{ordersModel>TrackTraces}">
                                        <HBox class="sapUiSmallMarginBegin sapUiTinyMarginTop" alignItems="Center">
                                        <items>
                                                <HBox width="190px">
                                                <Text text=" • {ordersModel>CreateDateEdit} {ordersModel>TtStatusText} {ordersModel>OrderQuantity} {ordersModel>OrderUnit}" />
                                                </HBox>
                                                <Text text=" | " class="sapUiTinyMarginBeginEnd" />
                                                <Link text="Track &amp; Trace"
                                                    href="{ordersModel>UrlTrackTrace}"
                                                    target="_blank"
                                                    class="sapMObjectListItemIntro"/>
                                        </items>
                                        </HBox>
                                    </VBox>
                                    </VBox>


                                    <!-- RIGHT: fixed column -->
                                    <VBox class="fixedRightCol">
                                    <Text text="{ordersModel>OrderUnitEdit}" class="sapMObjectListItemIntro"/>
                                    <ObjectStatus title="Antal" text="{ordersModel>OrderQuantity}" state="Success"/>
                                    <Button text="Tilføj vare til kurv" press="onCopyOrderItem"/>
                                    </VBox>

                                </HBox>
                                </CustomListItem>
                        </List>
                    </Page>
                </layout:contentAreas>
            </layout:Splitter>
            </content>
    </Page>
</mvc:View>